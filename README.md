# Gym Performance Intelligence System (GPIS)

**Data engineering project and advanced sports performance analysis based on business logic, relational logic and SQL (SQLite).**

The routine is based on my personal 7-day hypertrophy-focused gym split. The synthetic data was generated using randomized fatigue logic to validate the algorithms.

## Description

This project aims to digitize and optimize decision-making in strength training through a relational database engine. The main goal was not only to store logs, but to design a data architecture capable of **interpreting** performance in real time.

Algorithms were implemented to detect plateaus, predict intra-session fatigue, and calculate the need for deload weeks based on biological variables (sleep, diet) and load metrics.

The underlying dataset was synthetically generated by replicating my personal hypertrophy routine (frequency 2, split: *Chest/Back ‚Äì Arms ‚Äì Legs ‚Äì Rest ‚Äì Upper ‚Äì Lower ‚Äì Rest*), introducing random variability (rep drop between ‚Äì1 and ‚Äì3) to stress-test the algorithms.  
During development, minor assistance from AI tools‚Äîmainly GitHub Copilot‚Äîwas used for generating synthetic data (`INSERT` seeds), but all business logic, relational logic, schema design, and analytical decisions were made manually.

## Objectives

* **Plateau Detection:** Automatically identify when a lift fails to surpass the historical record (*Running Max*) within a given period.
* **Auto-Regulated Load Adjustment:** Predict when an athlete should reduce weight in the next set based on performance drop in the previous set due to accumulated fatigue.
* **Fatigue Management (Deload):** Calculate the optimal ‚ÄúDeload Week‚Äù by combining accumulated weeks, sleep hours, and nutritional phase (Bulking vs Recomposition vs Cutting).
* **Data Auditing:** Ensure data integrity through a dedicated quality-control layer.

## Data

* **Main Source:** Self-generated data based on my real 7-day routine.
* **Volume:** Simulations of 5‚Äì10 training-week cycles.
* **Simulated Profiles:**
    * *Juan:* Optimal profile (Bulking, sleep > 7h).
    * *Antonio:* High-risk profile (Cutting, sleep < 6h).

### Main Variables
* **Training:** `reps`, `weight`, `rpe`, `session_type` (Chest/Back, Lower, etc.).
* **Context:** `sleep_hours` (neural recovery), `training_goal` (bulk/cut/recomp).
* **Catalog:** Exercises such as *Machine Flat Press*, *Neutral Pulldown*, *Gironda Row*, *Overhead Triceps Extension*.

> To stress-test the system, a randomness factor was added to Antonio‚Äôs data, simulating rep drops of 1‚Äì3 across consecutive sets to trigger fatigue alerts.

## Methodology

### 1. Schema Design (OLTP)
Normalized SQLite database with 5 main tables (`Users`, `Exercises`, `Workouts`, `Sets`, `BodyMetrics`) ensuring referential integrity and proper data types.

### 2. Data Generation (Scenarios)
Creation of SQL (`seed`) scripts that simulate full training histories:
* **Scenario A (Progression):** Linear load increases.
* **Scenario B (Acute Fatigue):** Sudden intra-session rep drops.
* **Scenario C (Systemic Risk):** Multiple weeks with sleep deficit and restrictive dieting.

### 3. Plateau Detection Algorithm
Implementation of **Window Functions** (`MAX() OVER ... ROWS UNBOUNDED PRECEDING`) to compare current performance against the athlete‚Äôs lifetime max, avoiding false positives caused by na√Øve weekly comparisons.

### 4. Auto-Regulation Predictor
Use of displacement functions (`LAG`) to compare the current set (N) with the previous set (N-1).

* **Rule:** If reps fall below a critical threshold or fatigue is evident ‚Üí `üîª ALERT: REDUCE WEIGHT`.

### 5. Deload Week Predictor

A cumulative scoring system (*Fatigue Score*) was built using conditional SQL logic.

#### A. Scoring System (Fatigue Score)
Implemented using `CASE WHEN`, where 0 = ideal state and 10 = maximum risk.

* **Sleep Factor (Neural Recovery):**
    * `< 6 hours`: **+6 Points** (Critical Risk / CNS compromised)
    * `6‚Äì7 hours`: **+3 Points** (Incomplete recovery)
    * `7‚Äì8 hours`: **+1 Point**
    * `> 8 hours`: **0 Points**

* **Nutrition Factor (Energetic Recovery):**
    * `Cutting / Deficit`: **+4 Points**
    * `Recomposition`: **+2 Points**
    * `Bulking / Surplus`: **0 Points**

#### B. Temporal Decision Matrix
The system evaluates the total *Fatigue Score* against the current week of the mesocycle:

* **Range 1 (Weeks 0‚Äì5): Accumulation Phase.**
    * *Action:* `üü¢ KEEP TRAINING`
* **Range 2 (Week 6): Critical Safety Filter.**
    * *Logic:* If Score ‚â• 6  
    * *Action:* `üíÄ IMMEDIATE DELOAD`
* **Range 3 (Weeks 7‚Äì8): Fatigue-Management Zone.**
    * *Logic:* If Score ‚â• 3  
    * *Action:* `‚ö†Ô∏è PLAN DELOAD`
* **Range 4 (Week 9+): Physiological Limit.**
    * *Logic:* Regardless of score  
    * *Action:* `üî¥ MANDATORY DELOAD`

**Result:** A four-tier temporal classification system forcing early deloads for high-risk athletes while allowing low-risk profiles to push up to week 9.

## Conclusions

* The engine successfully differentiated the profiles: it recommended continued training for **Juan** (Week 5) and forced an immediate deload for **Antonio** (Week 9 + High Risk).
* **Window Functions** proved superior to subqueries for PR calculation.
* The intra-session load-adjustment predictor correctly reacted to synthetic fatigue, suggesting weight reductions on sets where reps dropped by more than 2.
* SQL can directly implement ‚ÄúBusiness Logic‚Äù within the database, reducing external processing.

## Repository Structure

```
sql-adaptive-strength-engine/
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql      # Table structure (CREATE)
‚îÇ   ‚îú‚îÄ‚îÄ 02_seeds.sql       # Synthetic data (Juan & Antonio)
‚îÇ   ‚îî‚îÄ‚îÄ 03_analysis.sql    # KPIs and decision algorithms
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îî‚îÄ‚îÄ data_quality.sql   # Data integrity tests
‚îî‚îÄ‚îÄ README.md              # Project documentation
```

## Autor

H√©ctor Zamorano Garc√≠a

## Cr√©ditos

Proyecto desarrollado √≠ntegramente por el autor, con apoyo puntual de herramientas de asistencia de inteligencia artificial (principalmente GitHub Copilot) para tareas menores como generaci√≥n de datos sint√©ticos o autocompletado de sentencias SQL.  
Toda la l√≥gica de negocio, dise√±o del esquema, decisiones anal√≠ticas y validaci√≥n fueron realizadas manualmente.

## Requisitos T√©cnicos

* SQLite 3.45+
* Cualquier cliente SQL (DBeaver, SQLiteStudio, VSCode + Extensi√≥n SQL)
* Capacidad para ejecutar scripts `.sql` de creaci√≥n, seed y an√°lisis
* Sistema operativo: Windows / Linux / macOS

## Notas

Este proyecto fue concebido con fines educativos y de experimentaci√≥n aplicada al entrenamiento de fuerza.  
Aunque se basa en una rutina real y principios fundamentados en fisiolog√≠a, su prop√≥sito es el an√°lisis t√©cnico y no reemplaza asesoramiento profesional.

## Licencia

Este proyecto se distribuye √∫nicamente con fines acad√©micos, anal√≠ticos y de investigaci√≥n.  
Se permite su lectura y uso personal.  
Queda prohibido su uso comercial o redistribuci√≥n sin autorizaci√≥n expresa del autor.
